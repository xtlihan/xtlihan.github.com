<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<link rel="Stylesheet" type="text/css" href="style.css">
<title>xilinx_zedboard_linux</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
</head>
<body>

<h1 id="toc_1" class="justcenter">xilinx zedboard linux</h1>

<h2 id="toc_1.1">uboot</h2>
<ul>
<li>
source ../env.sh

<li>
git checkout -b lihan_master master

<li>
make distclean

<li>
make zynq_zed_config

<li>
make

<li>
make distclean &amp;&amp; make zynq_zed_config &amp;&amp; make

<li>


<li>
env set sdboot "echo Copying Linux lihan from SD to RAM...; mmcinfo; fatload mmc 0 0x8000 zImage; fatload mmc 0 0x1000000 devicetree.dtb; fatload mmc 0 0x800000 ramdisk32M.image.gz; go 0x8000"

</ul>

<h2 id="toc_1.2">linux</h2>
<ul>
<li>
source ../env.sh

<li>
git checkout -b lihan_master master

<li>
make distclean

<li>
make ARCH=arm xilinx_zynq_defconfig

<li>
make ARCH=arm

<li>
make distclean &amp;&amp; make ARCH=arm xilinx_zynq_defconfig &amp;&amp; make ARCH=arm

</ul>

<h2 id="toc_1.3">busybox</h2>
<ul>
<li>
git clone <a href="git://git.busybox.net/busybox">git://git.busybox.net/busybox</a>

</ul>

<ul>
<li>
make distclean

<li>
make ARCH=arm defconfig

<li>
make menuconfig

<li>
BusyBox Settings -&gt; Installation Options -&gt; BusyBox installation prefix

<li>
set the install location to the /mnt/zedboard/boot/_rootfs folder.

<li>
make ARCH=arm install

</ul>

<h2 id="toc_1.4">dropbear</h2>
<ul>
<li>
wget <a href="http://matt.ucc.asn.au/dropbear/releases/dropbear-0.53.1.tar.gz">http://matt.ucc.asn.au/dropbear/releases/dropbear-0.53.1.tar.gz</a>
<pre>
./configure --prefix=/mnt/zedboard/boot/_rootfs \
--host=arm-xilinx-linux-gnueabi --disable-zlib \
LDFLAGS="-Wl,--gc-sections" \
CFLAGS="-ffunction-sections -fdata-sections -Os"
</pre>
<pre>
make PROGRAMS="dropbear dbclient dropbearkey scp \
dropbearconvert" MULTI=1 strip
</pre>

<li>
sudo make install

<li>


<li>
cd /mnt/zedboard/boot/_rootfs

<li>
ln -s sbin/dropbear /mnt/zedboard/boot/_rootfs/usr/bin/scp

<li>


<li>
mkdir etc etc/dropbear

<li>
cp dropbear_dss_host_key dropbear_rsa_host_key /mnt/zedboard/boot/_rootfs/etc/dropbear/

<li>


<li>
cd dev-tools

<li>
cp -r lib/ usr/ /mnt/zedboard/boot/_rootfs/

<li>


<li>
cd lib

<li>
ln -s libz.so.1.2.7 libz.so

<li>
ln -s libz.so.1.2.7 libz.so.1

</ul>
<p>
-
</p>
<ul>
<li>
cd usr/lib

<li>
ln -s libcrypto.so.1.0.0 libcrypto.so

<li>


</ul>
<p>
-
</p>
<ul>
<li>
cp /opt/xilinx/gcc_tools/arm-xilinx-linux-gnueabi/libc/lib/* lib

<li>
cp /opt/xilinx/gcc_tools/arm-xilinx-linux-gnueabi/libc/usr/lib/* usr/lib

<li>


<li>
arm-xilinx-linux-gnueabi-strip lib/*

<li>
arm-xilinx-linux-gnueabi-strip usr/lib/*

<li>


<li>
cp /opt/xilinx/gcc_tools/arm-xilinx-linux-gnueabi/libc/sbin/* sbin

<li>
cp /opt/xilinx/gcc_tools/arm-xilinx-linux-gnueabi/libc/usr/bin/* usr/bin

</ul>
<p>
-
</p>
<ul>
<li>
mkdir dev etc/init.d mnt opt proc root sys tmp var var/log var/www

</ul>

</body>
</html>
